<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="CSS," />





  <link rel="alternate" href="/atom.xml" title="whistlestop" type="application/atom+xml" />






<meta name="description" content="The style propertyEvery element in a document is an object, and every one of these objects has a whole collection of properties. Some properties contain information about the element’s position in the">
<meta name="keywords" content="CSS">
<meta property="og:type" content="article">
<meta property="og:title" content="DOM_Scripting_C09_CSS-DOM">
<meta property="og:url" content="blog.whistlestop.ml/2018/12/15/DOM-Scripting-C09-CSS-DOM/index.html">
<meta property="og:site_name" content="whistlestop">
<meta property="og:description" content="The style propertyEvery element in a document is an object, and every one of these objects has a whole collection of properties. Some properties contain information about the element’s position in the">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-12-15T11:10:24.257Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DOM_Scripting_C09_CSS-DOM">
<meta name="twitter:description" content="The style propertyEvery element in a document is an object, and every one of these objects has a whole collection of properties. Some properties contain information about the element’s position in the">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="blog.whistlestop.ml/2018/12/15/DOM-Scripting-C09-CSS-DOM/"/>





  <title>DOM_Scripting_C09_CSS-DOM | whistlestop</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  

  <div class="container  page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">whistlestop</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Never start something you're not willing to finish.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.whistlestop.ml/2018/12/15/DOM-Scripting-C09-CSS-DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eustoma">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="whistlestop">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">DOM_Scripting_C09_CSS-DOM</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-15T18:13:50+08:00">
                2018-12-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2018-12-15T19:10:24+08:00">
                2018-12-15
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/book-notes/" itemprop="url" rel="index">
                    <span itemprop="name">book notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="The-style-property"><a href="#The-style-property" class="headerlink" title="The style property"></a>The style property</h3><p>Every element in a document is an object, and every one of these objects has a whole collection of properties. Some properties contain information about the element’s position in the node tree. Properties like <strong>parentNode</strong>, <strong>nextSibling</strong>, <strong>previousSibling</strong>, <strong>childNodes</strong>, <strong>firstChild</strong>, and <strong>lastChild</strong> all supply information about related nodes in the document.<br><a id="more"></a><br>Other properties, like <strong>nodeType</strong> and <strong>nodeName</strong>, contain information about the element itself. Querying the <strong>nodeName</strong> property of an element will return a string like “p”.</p>
<p>There’s another property called <strong>style</strong>. Every element node has this property. It contains information about the styles attached to the element. Querying this property doesn’t return a simple string; it returns an object. The <strong>style</strong> property is in fact an object. You can use the <strong>typeof</strong> keyword to retrieve this information.</p>
<p>Compare the results of applying <strong>typeof</strong> to a property like <strong>nodeName</strong> and applying <strong>typeof</strong> to the <strong>style</strong> property. Style information is stored as properties of this style object:</p>
<p><code>element.style.property</code></p>
<p>Here’s an example of a paragraph with some inline styling attached:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"example"</span> <span class="attr">style</span>=<span class="string">"color: grey; font-family: 'Arial',sans-serif;"</span>&gt;</span></span><br><span class="line">An example of a paragraph</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Not only is every element an object, every element has a property called <strong>style</strong>, which is also an object. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> para = <span class="built_in">document</span>.getElementById(<span class="string">"example"</span>);</span><br><span class="line"> alert(<span class="keyword">typeof</span> para.nodeName); <span class="comment">//string</span></span><br><span class="line"> alert(<span class="keyword">typeof</span> para.style); <span class="comment">//object</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Getting-styles"><a href="#Getting-styles" class="headerlink" title="Getting styles"></a>Getting styles</h3><p>The value of a style property is always a string.</p>
<p><code>&lt;p id=&quot;example&quot; style=&quot;color: grey; font-family: &#39;Arial&#39;,sans-serif;&quot;&gt;</code></p>
<p>You can retrieve the inline styles attached to <strong>para</strong>.The camel-casing convention applies to just about any CSS property that contains one or more dashes. The CSS property <strong>background-color</strong> becomes the DOM property <strong>backgroundColor</strong>. The CSS property <strong>font-weight</strong> is <strong>fontWeight</strong> in the DOM. The DOM property <strong>marginTopWidth</strong> is equivalent to <strong>margin-top-width</strong> in CSS. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">element.style.color  <span class="comment">// grey</span></span><br><span class="line">element.style.fontFamily <span class="comment">// 'Arial',sans-serif</span></span><br></pre></td></tr></table></figure>
<p>In the example paragraph, the CSS color property has been set with the word “grey”. The DOM color property returns a value of “grey”. Edit the paragraph so that the CSS color property is set with the hexadecimal value #999999: </p>
<p><code>&lt;p id=&quot;example&quot; style=&quot;color: #999999; font-family: &#39;Arial&#39;,sans-serif&quot;&gt;</code></p>
<p><code>para.style.color // rgb(153,153,153)</code></p>
<p>This is an exceptional circumstance. Usually values are returned in the same units with which they are set. If you set the CSS font-size property in ems, the corresponding DOM <strong>fontSize</strong> property will also be in <strong>ems</strong>.</p>
<p>If an element’s CSS <strong>font-size</strong> property has a value of “1em”, the DOM <strong>fontSize</strong> property will return a value of “1em”. If “12px” is applied with CSS, the DOM will return “12px”. </p>
<h3 id="Inline-only"><a href="#Inline-only" class="headerlink" title="Inline only"></a>Inline only</h3><p>The <strong>style</strong> property only returns inline style information. If you apply styling information by inserting <strong>style</strong> attributes into your markup, you can query that information using the DOM style property:</p>
<p><code>&lt;p id=&quot;example&quot; style=&quot;color: grey; font: 12px &#39;Arial&#39;,sans-serif;&quot;&gt;</code></p>
<p>Add a <strong>link</strong> element to the head of example.html, pointing to the styles.css file:</p>
<p><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;screen&quot; href=&quot;styles/styles.css&quot; /&gt;</code></p>
<p>The DOM style property doesn’t retrieve styles declared externally.You’ll see the same result (or lack thereof) if you add style information between \&lt;style> tags in the head of example.html.The DOM style property won’t pick up that information. </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"> p#example &#123;</span></span><br><span class="line"><span class="undefined"> color: grey;</span></span><br><span class="line"><span class="undefined"> font: 12px 'Arial', sans-serif;</span></span><br><span class="line"><span class="undefined"> &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The <strong>style</strong> object doesn’t include stylistic information that has been declared in an external style<br>sheet. It also doesn’t include stylistic information that has been declared in the head of a document.</p>
<p>The <strong>style</strong> object does pick up stylistic information that has been declared inline using the style attribute. But this is of little practical use, because styles should be applied separately from the markup.</p>
<h3 id="Setting-styles"><a href="#Setting-styles" class="headerlink" title="Setting styles"></a>Setting styles</h3><p>Many DOM properties are read-only. That means you can use them to retrieve information, but you can’t use them to set or update information. Properties like <strong>previousSibling</strong>, <strong>nextSibling</strong>, <strong>parentNode</strong>, <strong>firstChild</strong>, and <strong>lastChild</strong> are invaluable for gathering information about an element’s position in the document’s node tree, but they can’t be used to update information.</p>
<p>The properties of the <strong>style</strong> object, on the other hand, are read/write. That means you can use an element’s <strong>style</strong> property to retrieve information, and you can also use it to update information.</p>
<h3 id="Styling-elements-in-the-node-tree"><a href="#Styling-elements-in-the-node-tree" class="headerlink" title="Styling elements in the node tree"></a>Styling elements in the node tree</h3><p>CSS2 introduced a number of position-based selectors such as <strong>:first-child</strong> and <strong>:last-child</strong>, while CSS3 includes position selectors such as <strong>:nth-child()</strong> and <strong>:nth-of-type()</strong>, but it’s still sometimes difficult to apply styles to an element based on its position in the document’s node tree. For instance, with CSS3 you could say, “Apply the following styles to the next sibling of all h1 elements” by using the <strong>h1~ *</strong> selector. The problem, however, is that many browsers don’t support all the nice CSS3 position selectors. </p>
<p>The DOM, on the other hand, makes it quite easy to target elements based on their familial relationships with other elements. Using the DOM, you could quite easily imitate the CSS3 sibling selector and find all the <strong>h1</strong> elements in a document and then find out what element immediately follows each <strong>h1</strong> and apply styles specifically to those elements. </p>
<p>But in this case you actually want to find not just the next node, but specifically the next element node. This is easily done using a function called <strong>getNextElement</strong>: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNextElement</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(node.nodeType == <span class="number">1</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> node;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (node.nextSibling) &#123;</span><br><span class="line"> <span class="keyword">return</span> getNextElement(node.nextSibling);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Repetitive-styling"><a href="#Repetitive-styling" class="headerlink" title="Repetitive styling"></a>Repetitive styling</h3><p>A common technique for making table rows more readable is to alternate the background colors. The resulting striped effect helps to separate individual rows. This can be done by applying styles to every second row. If the browser supports CSS3, it’s as easy as this:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(odd)</span> &#123; <span class="attribute">background-color</span>:# ffc; &#125;</span><br><span class="line"><span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(even)</span> &#123; <span class="attribute">background-color</span>:<span class="number">#fff</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>To get this same effect when <strong>:nth-child()</strong> isn’t available, you’ll need a different technique. This could be easily done by assigning a <strong>class</strong> attribute to each odd or even row.However, this isn’t very convenient, especially for larger tables—if a row is added to or removed from the middle of the table, you would have to painstakingly update the <strong>class</strong> attributes by hand.</p>
<p>JavaScript is very good at handling repetitive tasks. You can easily loop through a long list using a while or for loop. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripeTables</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementsByTagName) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> tables = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"table"</span>);</span><br><span class="line"> <span class="keyword">var</span> odd, rows;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;tables.length; i++) &#123;</span><br><span class="line"> odd = <span class="literal">false</span>;</span><br><span class="line"> rows = tables[i].getElementsByTagName(<span class="string">"tr"</span>);</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;rows.length; j++) &#123;</span><br><span class="line"> <span class="keyword">if</span> (odd == <span class="literal">true</span>) &#123; </span><br><span class="line"> rows[j].style.backgroundColor = <span class="string">"#ffc"</span>;</span><br><span class="line"> odd = <span class="literal">false</span>;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> odd = <span class="literal">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Responding-to-events"><a href="#Responding-to-events" class="headerlink" title="Responding to events"></a>Responding to events</h3><p>It’s not always easy to know when to use CSS and when to use DOM scripting to set styles. The biggest grey area concerns the changing of styles based on events.</p>
<p>CSS provides pseudo-classes like <strong>:hover</strong> that allow you to change the styles of elements based on their state. The DOM also responds to changes of state using event handlers like <strong>onmouseover</strong>. It’s difficult to know when to use :hover and when to use <strong>onmouseover</strong>.</p>
<p>The simplest solution is to follow the path of least resistance. If you simply want to change the color of your links when they’re moused over, then you should definitely use CSS:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#c60</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <strong>:hover</strong> pseudo-class is widely supported, at least when it is used for styling links. If you want to style any other elements when they are moused over, browser support isn’t quite so widespread.</p>
<p>Take the example of the table in itinerary.html. If you wanted to highlight a row when it is moused over, you could use CSS:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"> <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In theory, this should bold the text in any table row whenever it is moused over. In practice, this will only work in certain browsers. </p>
<p>In situations like that, the DOM can be used to level the playing field. While support for CSS pseudoclasses remains patchy, the DOM is well supported in most modern browsers. Until CSS support improves, it makes sense to use the DOM to apply styles based on events. </p>
<p>Here’s a short function called <strong>highlightRows</strong> that will bold text whenever a table row is moused over:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">highlightRows</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(!<span class="built_in">document</span>.getElementsByTagName) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> rows = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"tr"</span>);</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;rows.length; i++) &#123;</span><br><span class="line"> rows[i].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.style.fontWeight = <span class="string">"bold"</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> rows[i].onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.style.fontWeight = <span class="string">"normal"</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="className"><a href="#className" class="headerlink" title="className"></a>className</h3><p>In the examples you’ve seen so far in this chapter, the DOM has been used to explicitly set stylistic information. This is less than ideal because the behavior layer is doing the work of the presentation layer. If you change your mind about the styles being set, you’ll need to dig down into your JavaScript functions and update the relevant statements. It would be better if you could make those kinds of changes in your style sheets.</p>
<p>There’s a simple solution. Instead of changing the presentation of an element directly with the DOM, use JavaScript to update the <strong>class</strong> attribute attached to that element. </p>
<p>Take a look at how the <strong>styleHeaderSiblings</strong> function is adding stylistic information:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">styleHeaderSiblings</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementsByTagName) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> headers = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"h1"</span>);</span><br><span class="line"> <span class="keyword">var</span> elem;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;headers.length; i++) &#123;</span><br><span class="line"> elem = getNextElement(headers[i].nextSibling);</span><br><span class="line"> elem.style.fontWeight = <span class="string">"bold"</span>;</span><br><span class="line"> elem.style.fontSize = <span class="string">"1.2em"</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you ever decided that the elements following level one headings should have a CSS font-size value of “1.4em” instead of “1.2em”, you would have to update the <strong>styleHeaderSiblings</strong> function.</p>
<p>It would be better if you were to include a style sheet with a declaration for a class named something like <strong>intro</strong>:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.intro</span> &#123;</span><br><span class="line"> <span class="attribute">font-weight</span>: bold;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">1.2em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can use the assignment operator to set the <strong>class</strong> of an element. You can do this using the <strong>setAttribute</strong> method.</p>
<p><code>elem.setAttribute(&quot;class&quot;,&quot;intro&quot;);</code></p>
<p>An easier solution is to update a property called <strong>className</strong>. This is a read/write property of any element node. You can use <strong>className</strong> to get the class of an element.</p>
<p><code>element.className</code></p>
<p>You can use the assignment operator to set the class of an element. </p>
<p><code>element.className = value</code></p>
<p>This is how the <strong>styleHeaderSiblings</strong> function looks when you use <strong>className</strong> instead of setting styles directly with the style property:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">styleHeaderSiblings</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementsByTagName) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> headers = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"h1"</span>);</span><br><span class="line"> <span class="keyword">var</span> elem;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;headers.length; i++) &#123;</span><br><span class="line"> elem = getNextElement(headers[i].nextSibling);</span><br><span class="line"> elem.className = <span class="string">"intro"</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There’s just one drawback to this technique. If you assign a class using the <strong>className</strong> property, you will overwrite any classes that are already attached to that element. You can do this by concatenating a space and the name of the new class to the <strong>className</strong> property:</p>
<p><code>elem.className += &quot; intro&quot;;</code></p>
<p>But you really only want to do this when there are existing classes. If there are no existing classes, you can just use the assignment operator with <strong>className</strong>. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">element,value</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!element.className) &#123;</span><br><span class="line"> element.className = value;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> newClassName = element.className;</span><br><span class="line"> newClassName+= <span class="string">" "</span>;</span><br><span class="line"> newClassName+= value; </span><br><span class="line"> element.className = newClassName;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Call the <strong>addClass</strong> function from the <strong>styleHeaderSiblings</strong> function:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">styleHeaderSiblings</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementsByTagName) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> headers = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"h1"</span>);</span><br><span class="line"> <span class="keyword">var</span> elem;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;headers.length; i++) &#123;</span><br><span class="line"> elem = getNextElement(headers[i].nextSibling);</span><br><span class="line"> addClass(elem,<span class="string">"intro"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/CSS/" rel="tag"><i class="fa fa-tag"></i> CSS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/15/DOM-scripting-C05-Best-Practices/" rel="next" title="DOM_scripting_C05_Best_Practices">
                <i class="fa fa-chevron-left"></i> DOM_scripting_C05_Best_Practices
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/15/DOM-Scripting-C10-Animation/" rel="prev" title="DOM_Scripting_C10_Animation">
                DOM_Scripting_C10_Animation <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="eustoma" />
            
              <p class="site-author-name" itemprop="name">eustoma</p>
              <p class="site-description motion-element" itemprop="description">Too young to be old, too old to be young</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/bobingski" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://t.me/naeJean" target="_blank" title="Telegram">
                      
                        <i class="fa fa-fw fa-telegram"></i></a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://newdoub.com" title="doubi1" target="_blank">doubi1</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://doub.io" title="doubi2" target="_blank">doubi2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://google1.jiongjun.cc/" title="mirror" target="_blank">mirror</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://program-think.blogspot.com/" title="blogspot" target="_blank">blogspot</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-style-property"><span class="nav-number">1.</span> <span class="nav-text">The style property</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Getting-styles"><span class="nav-number">2.</span> <span class="nav-text">Getting styles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inline-only"><span class="nav-number">3.</span> <span class="nav-text">Inline only</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-styles"><span class="nav-number">4.</span> <span class="nav-text">Setting styles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Styling-elements-in-the-node-tree"><span class="nav-number">5.</span> <span class="nav-text">Styling elements in the node tree</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Repetitive-styling"><span class="nav-number">6.</span> <span class="nav-text">Repetitive styling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Responding-to-events"><span class="nav-number">7.</span> <span class="nav-text">Responding to events</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#className"><span class="nav-number">8.</span> <span class="nav-text">className</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">eustoma</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
